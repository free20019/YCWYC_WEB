<template>
  <div class="tw-template-wrapper">
    <!-- 整个左边 -->
    <div class="tw-lay-left">
      <!-- 左上部分 -->
      <div class="tw-left">
        <div class="tw-sum clearfix">
          <div class="tw-item clearfix">
            <div class="tw-title">企业许可</div>
            <div class="tw-title sub">
              <span></span><span>{{ permitNum.comp }}</span
              ><span>家</span>
            </div>
          </div>
          <div class="tw-item">
            <div class="tw-title">驾驶员</div>
            <div class="tw-title sub">
              <span></span><span>{{ permitNum.driver }}</span
              ><span>人</span>
            </div>
          </div>
          <div class="tw-item">
            <div class="tw-title">车辆</div>
            <div class="tw-title sub">
              <span></span><span>{{ permitNum.vehi }}</span
              ><span>辆</span>
            </div>
          </div>
          <div class="tw-item small"></div>
        </div>
        <div class="tw-rank">
          <div class="tw-title">当前各区活跃车辆与完单情况</div>
          <ul class="tw-list">
            <li><span>区域名</span><span>活跃车辆</span><span>完单率</span></li>
            <li v-for="(item, index) in current" :key="'curren_' + index">
              <span>{{ item.AREA_NAME }}</span
              ><span>{{ item.ACTIVE_NUM }}</span
              ><span>{{ ((item.DEP_NUM / item.MATCH_NUM) * 100).toFixed(2) + '%' }}</span>
            </li>
          </ul>
        </div>
        <div class="tw-echart-area">
          <div class="tw-title"><span style="margin-right:30px">当前在线总量</span>{{ dqzxzl }}</div>
          <div class="tw-echart" id="szlTotal"></div>
        </div>
        <div class="tw-svg-area">
          <svg class="cfq-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
            <g id="图层_2" data-name="图层 2">
              <g id="图层_1-2" data-name="图层 1">
                <path
                  d="M226.496333 307.087006a90.838825 90.838825 0 0 0 9.239786 15.847806c2.646069 3.075161 36.530052 15.847806 47.972512 17.607085s25.530988 10.999064 26.803961 21.554733 9.239786 25.974383 10.999064 27.733661 10.569972-0.443395 10.569972-0.443396l3.518556 6.164625s-2.60316 18.479572-3.032251 20.667943 3.961952 7.037113 3.961951 7.037112l5.892867-1.687762 0.257455-0.071516 1.330186-13.201737s14.961016-29.049544 16.276899-30.365427 44.89735-88.450212 44.89735-88.450212l14.961016-80.097216 10.112273-30.808822 7.39469-6.164625 0.085818-1.315883L446.105737 153.042895l-5.277835-12.758342L424.937187 133.690836s-11.885855 0.443395-17.16369 2.202673-13.645133-1.759278-13.645132-1.759278a123.793108 123.793108 0 0 0-11.44246 16.276899c-4.391044 7.923903-11.442459 8.367298-11.442459 8.367298l-58.084785-0.872487-30.365427-17.16369-31.652704-11.885854-14.903803-1.015519c-4.033467 12.372159-3.475647 13.244647-6.221837 20.381881-6.965597 18.207814-11.270823 17.163689-12.314947 26.403475-1.430307 13.230344 7.151537 16.233989 6.164625 30.808822-0.858184 12.057492-6.922688 11.542581-8.810694 23.757407-2.860615 18.593997 10.255304 25.101895 6.164625 41.364491-2.331401 9.268392-6.708142 7.652145-11.971673 19.437878 7.680751 7.180143 16.992052 16.090959 17.249507 17.092174z"
                  class="cls-1"
                  @mouseover="handleMouseOver('xixiaqu')"
                  @mouseout="handleMouseOut('xixiaqu')"
                  ref="xixiaqu"
                  id="xixiaqu"
                ></path>
                <path
                  d="M282.836143 140.742251l30.365427 17.16369 58.084785 0.872487s7.051416-0.443395 11.442459-8.367298a123.793108 123.793108 0 0 1 11.44246-16.276899s8.367298 3.518556 13.602223 1.744975 17.163689-2.202673 17.16369-2.202673l15.847806 6.60802 5.320744 12.758342-8.295784 18.064783-0.085818 1.315883-0.343274 4.834439 31.68131 42.251282 15.847806 15.847806 0.443396 19.809758 4.219406 0.100121 13.81677 0.328971 20.682246 9.683181L522.198092 284.631179l3.518556 6.60802 10.126577 0.429093 3.518556 11.885854 18.05048 3.518557 3.961952-6.150322s-0.443395-18.493875 0-20.253154-3.089464-32.124705 12.758342-33.011495a65.794142 65.794142 0 0 1 27.719358 4.405347s3.532859-0.443395 3.532859-1.759278-5.292137-13.201738-5.292137-13.201738l24.215105-52.80695 21.554733-23.328315 1.029821-17.778721a67.853785 67.853785 0 0 1-12.872767-3.790315c-11.07058-4.591287-12.32925-8.46742-20.253153-9.683181-7.466205-1.129943-10.312517 3.961952-14.961016 1.759278-5.635411-2.646069-3.833224-9.897727-8.796391-12.314947-6.83687-3.318313-13.988407 8.581845-22.012431 6.164625-8.753481-2.617463-6.622323-18.593997-17.607085-22.884919-5.492381-2.116855-7.566326 1.315883-12.314947-0.88679-10.012152-4.648499-3.933345-21.526127-13.201737-29.049544-11.442459-9.325604-31.295127 8.167055-44.89735-2.631766-5.520987-4.405347-6.0502-10.312517-13.201738-12.32925-6.178928-1.730672-8.681966 1.873703-14.961016 0-7.580629-2.259886-7.051416-8.46742-14.088528-11.442459-7.9096-3.346919-11.442459 3.30401-23.757406 2.646068-8.109843-0.443395-7.809479-3.361222-24.644197-8.810693-14.417499-4.648499-14.303074-2.41722-22.012432-6.150322-11.657006-5.72123-21.998128-15.847806-21.998128-15.847807a52.191918 52.191918 0 0 0-21.111338-6.150322c-7.594932-0.271758-9.597363 2.174067-13.201737 0C306.22167 8.867906 307.48034 3.075161 303.074993 1.230064c-3.804618-1.601944-9.440029 0.74376-12.314947 4.391044-4.391044 5.549593 0.18594 10.856033-3.532859 16.734597-3.890436 6.250443-10.598578 2.574553-17.592781 8.796391-8.066934 7.151537-3.404132 15.733382-11.44246 22.884919-7.151537 6.336262-13.387678 1.81649-17.607084 7.037112-6.593717 8.152752 7.709357 20.267456 4.405347 41.378794-0.843881 5.292137-1.687763 4.290922-7.923904 22.884919-0.300365 0.886791-0.572123 1.716369-0.829578 2.503038l14.903803 1.015519z"
                  class="cls-1"
                  @mouseover="handleMouseOver('helanxian')"
                  @mouseout="handleMouseOut('helanxian')"
                  ref="helanxian"
                  id="helanxian"
                ></path>
                <path
                  d="M464.585309 311.492353c-1.315883-3.075161-4.391044-31.68131-4.391044-31.68131l29.306999-24.544076-4.219407-0.100121-0.443395-19.809758-15.847806-15.847806-31.68131-42.251282 0.343274-4.834439-7.39469 6.164625-10.112273 30.808822-14.961016 80.097216s-43.581467 87.134329-44.89735 88.450212-16.276899 30.365427-16.276899 30.365427l-1.330186 13.201737-0.257455 0.071516a74.619139 74.619139 0 0 0 8.581844 10.941852c6.593717 6.593717 11.885855-6.60802 11.885855-6.608021l12.314947-26.403475a18.408057 18.408057 0 0 0 12.32925 1.315883c6.593717-1.759278 14.074225-26.846871 14.074225-26.846871l7.923904-25.516684 39.605212 1.315883 19.409272 9.225483 2.159764-21.111338s-4.79153-23.328314-6.121715-26.403475z"
                  class="cls-1"
                  @mouseover="handleMouseOver('jinfengqu')"
                  @mouseout="handleMouseOut('jinfengqu')"
                  ref="jinfengqu"
                  id="jinfengqu"
                ></path>
                <path
                  d="M443.531183 522.734457l-0.429092-9.239786 7.037113-17.607084 23.328314-28.606149 11.442459-17.163689 2.202674-15.404411 18.922967-9.683181 4.391044-9.668879 15.032531-18.036176-7.552023-7.051416 12.32925-13.201738 2.646069-7.051415-13.201738-18.036177-11.013367-2.646069-3.632981-7.923903-8.796391-6.593717-8.810694 7.480508-3.518556 15.404411-15.404411 1.315883-19.251938-9.239786-39.605213-1.315883-7.923903 25.516684s-7.480508 25.087592-14.074225 26.846871a18.408057 18.408057 0 0 1-12.32925-1.315883l-12.314947 26.403475s-5.292137 13.201738-11.885855 6.608021a74.619139 74.619139 0 0 1-8.581845-10.941852l-5.892866 1.687762s-4.405347-4.834439-3.961952-7.037112 3.075161-20.682245 3.075161-20.682246l-3.518556-6.164625s-8.810694 2.202673-10.569972 0.443396-9.726091-17.163689-11.156398-27.733661-15.404411-19.795455-26.84687-21.554733-45.326443-14.531924-47.972512-17.607085a90.838825 90.838825 0 0 1-9.239786-15.847806c-0.257455-1.029821-9.568757-9.912031-17.249507-17.092174l-0.357577 0.815275c-5.106198 11.95737-1.81649 15.361502-5.277835 37.845935-2.860615 19.094604-5.978685 20.882489-5.277834 32.5681a73.346165 73.346165 0 0 0 6.164625 24.644197c9.254089 20.968307 20.667942 20.524912 22.884919 34.327378 2.302795 14.431802-9.096755 21.626248-3.518556 32.568101 2.131158 4.205104 5.821351 6.60802 13.201737 11.442459 5.72123 3.704496 7.838085 4.119285 21.998128 10.555669 15.590351 7.151537 19.366363 9.497241 22.884919 12.32925a74.118531 74.118531 0 0 1 9.683182 9.683181c24.987471 28.00542 28.362996 33.669437 36.086656 34.327379 6.679536 0.572123 6.751051-3.447041 16.720294-3.518557 2.860615 0 15.146956-0.128728 23.77171 7.923904s6.536505 18.994483 12.314947 19.352059c6.207534 0.400486 8.782088-0.843881 8.810693-7.9096 0-0.672244 5.492381-5.320744 5.864261-2.946433 0.529214 3.332616 8.038328 4.391044 20.539215 11.742824a54.966715 54.966715 0 0 1 5.721229 3.747405l33.011496-27.519115z"
                  class="cls-1"
                  @mouseover="handleMouseOver('yongningxian')"
                  @mouseout="handleMouseOut('yongningxian')"
                  ref="yongningxian"
                  id="yongningxian"
                ></path>
                <path
                  d="M822.391016 737.066026c-7.280265-7.237356-21.254368 2.617463-30.808822-6.164625-5.192016-4.777227-5.821351-12.057492-7.037113-26.403475-1.644854-19.151817 2.04534-26.317657-2.646069-29.922032-6.622323-5.106198-18.379451 5.792745-26.403475 0-3.718799-2.688978-4.290922-7.308871-5.277834-14.088528-0.300365-2.116855 1.330186-28.834998 13.201737-34.327378 6.9799-3.232495 6.221837 3.389829 18.479572 1.759278 8.481723-1.129943 18.207814-6.708142 21.125641-14.961016 1.044124-2.975039 1.81649-7.995419-8.79639-29.049544-11.442459-22.741888-19.16612-30.322518-15.847807-37.845934 2.789099-6.321959 7.451902-3.532859 9.683182-10.555669a18.121995 18.121995 0 0 0-5.277835-18.493875c-10.112274-9.311301-18.722724-3.189586-34.327378-9.683182-17.464054-7.265962-16.691688-22.884919-36.10096-29.922031-7.766569-2.860615-8.724875 0.157334-17.592781-2.646069-13.716648-4.290922-23.142374-12.643918-35.214169-21.125641-19.738243-13.859679-23.013647-4.79153-41.364491-20.23885-3.504253-2.946433-10.999064-6.0502-8.810694-13.201738a12.786948 12.786948 0 0 1 0.858184-2.00243c-2.946433-2.402916-6.936991-5.72123-8.767784-7.237356-3.089464-2.646069-9.683181-27.290266-9.683181-27.290265s-15.847806-16.276899-22.455827-18.036177-25.516685 17.592781-25.516685 17.592781l-12.32925 19.809758-6.093109-5.721229-15.032532 18.050479-4.391043 9.668879-18.922968 9.683181-2.202673 15.404411-11.44246 17.163689-23.328314 28.606149-7.037112 17.592781 0.429092 9.239786 11.013367 9.239786-33.011495 27.519115a16.419929 16.419929 0 0 1 6.60802 9.454332c1.902309 9.683181-11.328035 15.332896-10.012152 25.530988 1.430307 11.142095 8.767785 6.264747 12.32925 15.833503 2.860615 7.766569 1.787884 7.380386 5.563896 13.788164a68.225665 68.225665 0 0 0 7.051415 10.856033c8.367298 10.584275 2.18837 20.224547 9.683182 26.417779 2.760493 2.274189 6.822566 3.275404 14.961016 5.277834 6.393474 1.573338 10.112274 1.67346 10.555668 3.518556 0.686548 2.860615-7.523417 4.576984-8.79639 10.555669-1.11564 5.177713 3.275404 12.100401 8.79639 14.088528 6.23614 2.245583 11.728521-2.574553 14.088529 0s-2.073946 7.394689 0 11.44246 9.139664 0.18594 13.201737 4.405347a9.668878 9.668878 0 0 1 1.759278 9.683181c-1.315883 3.404132-4.79153 5.292137-10.555669 7.037113-17.077871 5.177713-23.085162-0.271758-29.936334 4.405347-7.895297 5.377956-9.797606 19.380666-7.037113 29.03524 3.361222 11.800036 13.587921 16.820415 11.44246 21.125641-1.888006 3.847527-10.212395 0.443395-17.621388 6.164625a21.154247 21.154247 0 0 0-7.037112 11.44246c-5.177713 19.68103 25.159108 34.198651 23.757406 58.971575-0.443395 7.823782-8.496026 10.770215-7.037112 18.479572 1.158549 6.107413 5.72123 7.480508 7.037112 14.975319 0.986912 5.921473-1.687763 6.522202-1.759278 14.074225 0 1.787884 0 13.888285 7.923903 22.012431 3.518556 3.604375 5.006076 2.760493 8.810694 7.037113 4.576984 5.16341 3.919042 8.109843 7.037113 12.32925 6.136019 8.28148 14.131437 4.162195 19.366362 10.555669 6.994203 8.581845-4.290922 19.781152 2.631766 32.5681 3.733102 6.965597 10.612881 10.269607 16.734597 13.201738 10.498457 5.048985 12.958585 1.830794 25.516684 6.164625 13.502102 4.648499 14.102831 9.540151 27.290266 12.314947 9.311301 1.973824 14.51762 0.686548 16.720294 0s9.096755-2.860615 13.201738-8.796391c6.622323-9.697484-1.430307-18.593997 4.405347-25.530988 5.063288-5.992988 12.400765-0.901094 21.998128-8.79639 2.41722-1.988127 4.548378-4.848742 8.810694-10.569972 5.077591-6.808263 7.609236-10.212395 7.923903-13.201738 0.843881-8.352995-7.72366-11.313732-7.923903-19.352059-0.143031-5.849957 0-7.923903 12.314947-15.847807s24.901652-14.303074 29.049544-14.961015c8.481723-1.315883 13.173131 2.145461 25.530987 8.79639 17.163689 9.21118 36.715992 9.640272 44.883047-0.872487 0.758063-0.972609 2.574553-3.547162 2.646069-14.975319 0.143031-28.105541-11.571187-46.170324-6.164625-58.971576 2.56025-6.0502 6.665233 1.587641 18.479572-7.923903 2.41722-1.930915 24.315226-19.809758 37.845935-46.642325 3.389829-6.579414 19.037392-37.402539 8.853603-47.514813z"
                  class="cls-1"
                  @mouseover="handleMouseOver('lingwushi')"
                  @mouseout="handleMouseOut('lingwushi')"
                  ref="lingwushi"
                  id="lingwushi"
                ></path>
                <path
                  d="M624.350649 184.309416l-24.215105 52.80695s5.292137 11.885855 5.292137 13.201738-3.532859 1.759278-3.532859 1.759278a65.794142 65.794142 0 0 0-27.719358-4.405347c-15.847806 0.886791-12.32925 31.252217-12.758342 33.011496s0 20.253153 0 20.253153l-3.961952 6.150322-18.093389-3.518557-3.518556-11.885854-10.126577-0.429093L522.198092 284.631179l1.759278-19.366363-20.639336-9.668878-13.81677-0.328971-29.306999 24.544076s3.075161 28.606149 4.391044 31.68131 6.121716 26.403475 6.121715 26.403475L468.54726 359.007166l15.404411-1.315883 3.518557-15.404411 8.810693-7.480508 8.753482 6.60802 3.518556 7.923903 11.013367 2.646069 13.201738 18.036177-2.646069 7.051415-12.214825 13.201738 7.552023 7.051416 0.37188-0.457699-0.37188 0.457699 6.09311 5.721229 12.32925-19.809758s18.922967-19.35206 25.516684-17.592781 22.455827 18.036177 22.455827 18.036177 6.593717 24.644197 9.683181 27.290266c1.830794 1.573338 5.821351 4.834439 8.767785 7.237355 2.989343-5.592502 10.627184-10.312517 14.117134-12.958585 47.529116-36.086657 72.173313-110.906038 72.173313-147.879486 0-16.977749-14.760773-36.673083-5.277834-54.566228 3.261101-6.178928 8.939421-12.100401 8.79639-21.998128 0-0.74376-0.414789-15.032531-9.683181-20.253154s-18.222117 4.062073-27.290266-1.759278c-5.249228-3.375526-3.203889-7.151537-9.683181-12.314947a15.618957 15.618957 0 0 0-6.450686-3.261101l-1.029822 17.778722z"
                  class="cls-1"
                  @mouseover="handleMouseOver('xingqingqu')"
                  @mouseout="handleMouseOut('xingqingqu')"
                  ref="xingqingqu"
                  id="xingqingqu"
                ></path>
                <!-- <path
                  d="M523.620436 260.969971c-4.290623 8.581245 1.430208 17.162491-2.860415 25.743736 10.011453-1.430208 18.592698 0 21.453113 12.871868 1.430208 4.290623 11.44166 1.430208 18.592699 1.430208-1.430208-21.453113 1.430208-44.336434 20.022905-57.208302 4.290623-4.290623 10.011453 0 15.732283 4.290622 4.290623 1.430208 10.011453-1.430208 8.581246-4.290622-11.44166-31.464566 21.453113-58.638509 37.185396-82.952038 3.704238-5.563507 6.82209-12.871868 11.270035-18.964552l-3.647029-4.748289a5.348976 5.348976 0 0 0-1.129864-1.072656 89.688315 89.688315 0 0 0-30.806671-12.399899c-20.022906-4.290623-10.011453 1.430208-27.173943-2.860415s-20.022906 8.581245-28.604151-2.860416-24.313528-12.871868-25.743736-25.743735c-1.158468-10.397609-11.656192-22.66879-15.632168-27.002319a4.991424 4.991424 0 0 0-3.689936-1.601832h-30.39191a13.544065 13.544065 0 0 1-6.06408-1.430208l-5.191654-2.588676a13.501159 13.501159 0 0 0-7.151037-1.430207l-4.877008 0.400458a13.529763 13.529763 0 0 1-12.871868-6.664767 13.501159 13.501159 0 0 0-16.418783-5.849549c-5.72083 2.145311-12.171066 4.648175-15.031481 6.078382-5.72083 2.860415-10.011453-14.302075-21.453113-14.302075-8.581245 0-16.361574-4.834102-19.70826-7.236851a75.357636 75.357636 0 0 0-5.72083-3.704237l-2.13101-1.272885a83.409704 83.409704 0 0 0-39.07327-11.44166 30.763764 30.763764 0 0 1-13.515461-3.546915A35.440543 35.440543 0 0 1 307.187128 2.588676a5.034331 5.034331 0 0 0-7.151038-0.672198l-3.804352 3.246571a4.96282 4.96282 0 0 0-1.701947 3.103551l-0.929635 6.47884a5.062935 5.062935 0 0 1-1.430207 2.860415l-12.54292 12.54292a4.691081 4.691081 0 0 1-1.301489 0.929635l-11.956535 5.99257a5.005726 5.005726 0 0 0-2.345541 2.445655L259.990279 48.627057a5.048633 5.048633 0 0 1-3.217967 2.860415l-5.72083 1.644738a4.934216 4.934216 0 0 0-3.03204 2.417051L241.397581 67.634515a4.977122 4.977122 0 0 0-0.486271 3.561217L247.118411 97.511551a5.005726 5.005726 0 0 1-0.443364 3.51831l-9.725412 18.235146a4.96282 4.96282 0 0 0-0.514874 3.260874l0.443364 2.459957a38.915947 38.915947 0 0 1 16.404481 0.114416c22.883321 5.72083 40.045811 22.883321 62.929132 27.173944 20.022906 4.290623 40.045811 1.430208 60.068717-4.290623 10.011453-2.860415 17.162491-14.302075 25.743736-17.162491 17.162491-4.290623 54.347887-2.860415 44.336434 20.022906-3.146457 6.307215-6.736278 12.614431-9.796922 19.150479 7.680215 9.353557 13.129305 18.792927 19.808374 29.476578 7.151038 12.871868 20.022906 20.022906 28.604151 32.894773 3.504008 4.662477-0.614989 11.241431-1.430207 18.163636 14.631023-2.016593 25.214559 7.966256 40.074415 10.440515zM803.941116 724.357217c-28.604151 0-18.592698-7.151038-18.592698-22.883321s0-25.743736-10.011453-21.453113c-8.838683 3.79005-18.792927-21.453113-20.995447-27.359871a4.905612 4.905612 0 0 1-0.228833-2.602977c1.072656-5.72083-5.348976-33.466857 8.352412-27.173944 15.732283 7.151038 40.045811-7.151038 42.906226-17.16249 2.34554-8.180787-15.861002-43.564122-25.214559-54.676835a4.977122 4.977122 0 0 1 0.386156-6.82209 30.406212 30.406212 0 0 0 6.235705-8.581245c3.4468-6.907902-2.34554-17.50574-4.748289-21.453113a4.991424 4.991424 0 0 0-2.531467-2.059499l-36.212855-13.415347a5.077237 5.077237 0 0 1-1.51602-0.901031l-27.173944-23.269477a5.220258 5.220258 0 0 0-4.290622-1.258582c-5.148747 0.901031-20.995447-2.502863-58.009219-29.233443-25.743736-18.592698-45.89536-24.313528-43.864465-28.604151a4.290623 4.290623 0 0 1 0.357552-0.614989c-3.146457-0.958239-5.72083-2.116707-6.550351-3.718539-11.44166-17.162491-11.44166-44.336434-30.034358-45.766642-15.732283-2.860415-34.324981 17.162491-41.476019 34.324981a21.63904 21.63904 0 0 1-5.177351-3.661331 56.85075 56.85075 0 0 1-16.275762 23.684237c-7.151038 4.290623-18.592698 1.430208-21.453114 10.011453-1.430208 7.151038 0 18.592698-4.290622 24.313528-10.011453 12.871868-18.592698 24.313528-27.173944 37.185396-1.430208 0-4.290623 2.860415-7.151037 1.430208-4.290623 15.732283-8.581245 28.604151 7.151037 37.185396-8.938797 11.44166-17.891896 22.983435-30.906785 29.376463l1.616135 6.47884a5.005726 5.005726 0 0 1-1.315791 4.762591l-3.246571 3.246572a5.020028 5.020028 0 0 0-1.430208 4.533757l0.286042 1.430208a5.048633 5.048633 0 0 1-1.916478 5.005726l-0.514875 0.386156a5.005726 5.005726 0 0 0-1.85927 5.23456l2.660186 10.655046a5.034331 5.034331 0 0 0 4.161904 3.747144l2.359842 0.34325a5.020028 5.020028 0 0 1 4.290623 4.96282v6.607559a5.020028 5.020028 0 0 0 3.089248 4.633872l11.441661 4.748289a4.991424 4.991424 0 0 1 3.046342 3.99028l3.246571 24.857007a5.020028 5.020028 0 0 0 5.806643 4.290622l9.482276-1.573228a5.005726 5.005726 0 0 1 4.376435 1.430208l3.203665 3.203665a5.020028 5.020028 0 0 1 0 7.151037l-1.673343 1.673343a5.020028 5.020028 0 0 0-1.430208 4.605268l2.860415 13.372441a5.005726 5.005726 0 0 0 4.905612 3.975977h12.871868a4.977122 4.977122 0 0 1 4.419342 2.660186c1.601832 2.96053 4.447945 7.351267 7.279756 7.351267s3.203665 9.85413 3.060644 15.732283a5.034331 5.034331 0 0 1-4.290623 4.848403l-34.18196 4.719685a4.991424 4.991424 0 0 0-4.104696 3.475405l-5.577809 17.84899a4.977122 4.977122 0 0 0 0.34325 3.832956l9.882734 18.87874a5.020028 5.020028 0 0 1-5.434789 7.251152 5.020028 5.020028 0 0 0-5.420486 2.588676c-1.616135 3.046342-4.733987 7.151038-10.011453 8.052068-7.794631 1.301489 0.929635 29.719713 2.602978 34.93997a4.848404 4.848404 0 0 0 0.772312 1.430208c2.760301 3.532613 15.832398 20.437666 20.938238 29.376463 3.217967 5.620716-0.772312 8.581245-4.905612 10.011453a5.020028 5.020028 0 0 0-2.488561 7.50859l6.607559 9.911338a4.89131 4.89131 0 0 1 0.843822 2.588675l1.301489 33.709992a4.977122 4.977122 0 0 0 1.430208 3.37529c3.060644 3.003436 10.011453 10.569234 10.011453 17.276907 0 6.950809 8.452527 12.95768 11.656191 15.002878a1.916478 1.916478 0 0 0 0.6865 0 16.762032 16.762032 0 0 1 17.691667 17.84899c6.650465 14.502305 8.68136 20.952541 24.313529 23.941674a18.893042 18.893042 0 0 0 2.860415 0.371854c1.830666 0 5.463393 2.588676 9.024609 5.549205a50.057264 50.057264 0 0 0 24.313529 11.026901l1.430207 0.214531a4.991424 4.991424 0 0 1 3.589821 2.474259l2.27403 3.975977a5.020028 5.020028 0 0 0 6.393028 2.088103l19.36501-8.581246a4.991424 4.991424 0 0 0 2.860415-3.360987l6.679069-26.730579a5.020028 5.020028 0 0 1 6.192799-3.618425 32.52292 32.52292 0 0 0 7.980558 1.258582c4.791195 0 11.570379-6.993715 13.658482-9.296349a4.605268 4.605268 0 0 0 0.972541-1.573228l6.292914-16.347272a4.96282 4.96282 0 0 0 0.214531-2.860416l-3.832957-17.9205a5.020028 5.020028 0 0 1-0.100114-1.430208c0.257437-3.246571 2.116707-15.303221 15.732283-17.777479 10.554932-1.916478 18.521188-8.981703 22.640185-13.429649a4.96282 4.96282 0 0 1 6.879299-0.371854c7.351267 6.307215 23.655633 19.179083 33.409648 18.092125 9.067516-1.015447 24.542362-4.862706 32.894774-7.036621a5.034331 5.034331 0 0 0 3.289477-6.936507l-4.290623-9.51088a4.905612 4.905612 0 0 1-0.443364-1.744853l-3.975977-59.611051c-0.143021-2.259728 7.623006-0.228833 9.754016-0.972541 8.481131-2.974832 13.629878-6.393028 27.173943-14.302075 17.162491-10.011453 34.324981-74.370792 35.755189-80.091623s4.362133-14.302075-24.242018-14.302075z"
                  class="cls-1"
                /> -->

                <!-- <path
                  @mouseover="handleMouseOver('tongluxian')"
                  @mouseout="handleMouseOut('tongluxian')"
                  ref="tongluxian"
                  id="tongluxian"
                  class="cls-1"
                  d="M441.47,224.13l-8.92,11.15L437,245.69l.42,13.39-7.24,2.43-4,2-10,6.73-19-6.89-11.46,6.14-7.15-8.88-7.72,5.91h-8.18l4,18.8-18.88,5.74,5.95,15.62-3,8.18-5.95-.74-6,8.18-2.24,13.39,8.19,9.67,5.95-3.72,12.64,7.44,9.67-4.47,1.49,11.16,8.18,17.85-3,19.34,8.93.74,4.46,4.46s8.18,3,8.92,1.49,8.19-14.87,8.19-14.87l4.95-5.27,5.46,3.78,8.54,3.22,12,6,8.46-7s10.42,12.64,11.16,11.16,20.83-4.47,20.83-5.95,11.55-.22,11.55-.22l4.06,1.7,8.93,6,3.72,9.67,1.49,20.83,13.38.74,17.85,13.39s4.57,24,4.57,21.72,8-11,8-11l4.54-6.26,13.39,7.44,5.2-3V435.35c0-.74,9.67-11.9,9.67-11.9l14.13-6.69,6.7,5.2,17.1,3.72,30.5-6.69.74-7.44-14.87-8.92-6.7,5.95-8.18-14.13-3-17.11-13.39-8.93,2.23-8.92,6.69-3,1.49-19.33-12.64,2.23L594.69,322.3l-34.54,5.14a2.78,2.78,0,0,0-.8.26l-4.16-6.19c-.38.19-3,9.89-3.28,10.22h0c-1,1.31-1.57-6.06-2.72-7.22l-9-6c-.51-.5-4.26,1.16-4.26.45v-13l-7.57-6.89-6.17-2.54-4.85-4-11.16-13.39-14.44-3.91-2.55-3.74-7.82-2.05,2.5-5.17L465.81,256l3.35-10.68s-3.64-11.44-4.88-13.73-16.11-6.75-16.11-6.75Z"
                /> -->
              </g>
            </g>
          </svg>
        </div>
        <div class="tw-summary" ref="summary">
          <div class="tw-item">
            <div>区域名：{{ tck.areaName }}</div>
            <div>活跃车辆：{{ tck.hycl }}</div>
            <div>累计订单接单量：{{ tck.ddxq }}</div>
            <div>累计订单成交量：{{ tck.ddcj }}</div>
          </div>
        </div>
      </div>
      <!-- 左下部分 -->
      <div class="tw-layout-foot">
        <div class="tw-tab clearfix">
          <div
            class="tw-tab-item"
            :class="[tab.avg == '行业日均' ? ' active' : 'no-active']"
            @click="handleTabAvg('行业日均')"
          >
            行业日均
          </div>
          <div
            class="tw-tab-item"
            :class="[tab.avg == '单车日均' ? ' active' : 'no-active']"
            @click="handleTabAvg('单车日均')"
          >
            单车日均
          </div>
        </div>
        <div class="tw-echart-area danche" v-loading="leftBottomData.loading">
          <div id="left_bottom-btn" v-if="tab.avg == '行业日均'">
            <div
              class="tw-btn"
              :class="{ active: leftBottomData.name == 'ACTIVE_NUM' }"
              @click="handleLeftBottomClick('ACTIVE_NUM')"
            >
              日均活跃车辆
            </div>
            <div
              class="tw-btn"
              :class="{ active: leftBottomData.name == 'MATCH_NUM' }"
              @click="handleLeftBottomClick('MATCH_NUM')"
            >
              日均接单
            </div>
            <div
              class="tw-btn"
              :class="{ active: leftBottomData.name == 'DEP_NUM' }"
              @click="handleLeftBottomClick('DEP_NUM')"
            >
              日均完单
            </div>
          </div>
          <div id="left_bottom-btn" v-else-if="tab.avg == '单车日均'">
            <div
              class="tw-btn"
              :class="{ active: leftBottomData.name == 'ORDER_AVE' }"
              @click="handleLeftBottomClick('ORDER_AVE')"
            >
              日均单量
            </div>
            <div
              class="tw-btn"
              :class="{ active: leftBottomData.name == 'PRICE_AVE' }"
              @click="handleLeftBottomClick('PRICE_AVE')"
            >
              日均营收
            </div>
            <div
              class="tw-btn"
              :class="{ active: leftBottomData.name == 'MILE_AVE' }"
              @click="handleLeftBottomClick('MILE_AVE')"
            >
              日均载客里程
            </div>
            <div
              class="tw-btn"
              :class="{ active: leftBottomData.name == 'DUR_AVE' }"
              @click="handleLeftBottomClick('DUR_AVE')"
            >
              日均载客时长
            </div>
          </div>
          <div id="left_bottom-echart">
            <div id="lbEchart"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- 整个右边 -->
    <div class="tw-right" id="right">
      <table class="tw-table">
        <thead>
          <td></td>
          <td
            class="tw-item"
            @click="handleTableHeadClick('paidan')"
            :class="{ active: rightTopData.activeName == 'paidan' }"
          >
            接单
          </td>
          <td
            class="tw-item"
            @click="handleTableHeadClick('wandan')"
            :class="{ active: rightTopData.activeName == 'wandan' }"
          >
            完单
          </td>
          <!-- <td>接单时长</td> -->
          <td
            class="tw-item"
            @click="handleTableHeadClick('huoyuecheliang')"
            :class="{ active: rightTopData.activeName == 'huoyuecheliang' }"
          >
            活跃车辆
          </td>
        </thead>
        <tbody>
          <tr>
            <td>今日累计</td>
            <td>{{ dayData.jrpd }}</td>
            <td>{{ dayData.jrwd }}</td>
            <!-- <td>{{ dayData.jrsc }}</td> -->
            <td>{{ dayData.jrhy }}</td>
          </tr>
          <tr>
            <td>昨日同比</td>
            <td>{{ dayData.zrpd }}</td>
            <td>{{ dayData.zrwd }}</td>
            <!-- <td>{{ dayData.zrsc }}</td> -->
            <td>{{ dayData.zrhy }}</td>
          </tr>
          <tr>
            <td>上周同比</td>
            <td>{{ dayData.szpd }}</td>
            <td>{{ dayData.szwd }}</td>
            <!-- <td>{{ dayData.szsc }}</td> -->
            <td>{{ dayData.szhy }}</td>
          </tr>
          <tr>
            <td>上月同比</td>
            <td>{{ dayData.sypd }}</td>
            <td>{{ dayData.sywd }}</td>
            <!-- <td>{{ dayData.sysc }}</td> -->
            <td>{{ dayData.syhy }}</td>
          </tr>
        </tbody>
      </table>
      <div id="right_mid-echart">
        <div id="rmEchart"></div>
      </div>
      <div class="tw-echart-area clearfix">
        <div class="tw-echart-right">
          <div class="tw-echart" id="rightRightEchart"></div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import { ajaxT } from 'util'
import echarts from 'echarts'
import { loading } from '../assets/js/util'
import _ from 'underscore'
import moment from 'moment'
export default {
  name: 'OperationOverview',
  data() {
    return {
      echart: null,
      tab: {
        date: '今日',
        avg: '行业日均'
      },
      avgEchart: {
        daySend: null,
        dayGet: null,
        revenue: null,
        carRate: null
      },
      hangyeEchart: {
        jingyingqingkuang: null,
        jiedanshichang: null,
        huoyuecheliang: null
      },
      rightEchart: {
        right: null,
        left: null
      },
      mapEchart: {
        onlineTotal: null,
        szlTotal: null
      },
      table: {
        data: []
      },
      permitNum: {
        comp: 0,
        driver: 0,
        vehi: 0
      },
      dayData: {
        jrpd: 0,
        jrwd: 0,
        jrsc: 0,
        jrhy: 0,
        zrpd: 0,
        zrwd: 0,
        zrsc: 0,
        zrhy: 0,
        szpd: 0,
        szwd: 0,
        szsc: 0,
        szhy: 0,
        sypd: 0,
        sywd: 0,
        sysc: 0,
        syhy: 0
      },
      current: [],
      dayList: [],
      tck: {
        hycl: 0,
        ddxq: 0,
        ddcj: 0,
        areaName: ''
      },
      dqzxzl: 0,
      rightTopData: {
        all: 0,
        dd: 0,
        loading: false,
        activeName: 'huoyuecheliang',
        data: []
      },
      warning: {},
      leftBottomEchart: null,
      leftBottomData: {
        loading: false,
        name: 'ACTIVE_NUM',
        data1: [], // 行业日均数据
        data2: [] // 单车日均数据
      },
      rmEchart: null,
      rmData: []
    }
  },
  mounted() {
    this.$nextTick(() => {
      setTimeout(() => {
        this.querypermitNum()
        this.getDayData()
        this.getIndustryDayAverage()
        this.getAreaSituation()
        this.getService()
        this.initRightEchart()
        this.initRightLeftEchart()
        this.getEarlyWarningNum()
      }, 500)

      window.onresize = () => {
        setTimeout(() => {
          if (this.leftBottomEchart) this.leftBottomEchart.resize()
          if (this.rightEchart.right) this.rightEchart.right.resize()
          // this.rightEchart.left.resize()
          this.rightEchart.right.resize()
          if (this.rmEchart) this.rmEchart.resize()
          if (this.avgEchart.daySend) this.avgEchart.daySend.resize()
          if (this.avgEchart.dayGet) this.avgEchart.dayGet.resize()
          if (this.avgEchart.revenue) this.avgEchart.revenue.resize()
          if (this.avgEchart.carRate) this.avgEchart.carRate.resize()
          this.mapEchart.szlTotal.resize()
          if (this.hangyeEchart.jingyingqingkuang) this.hangyeEchart.jingyingqingkuang.resize()
          if (this.hangyeEchart.jiedanshichang) this.hangyeEchart.jiedanshichang.resize()
          if (this.hangyeEchart.huoyuecheliang) this.hangyeEchart.huoyuecheliang.resize()
        }, 400)
      }
    })
  },
  methods: {
    handleLeftBottomClick(type) {
      this.leftBottomData.name = type
      if (this.tab.avg == '行业日均') {
        if (this.leftBottomEchart) this.leftBottomEchart.clear()
        this.formatterLeftBottom(this.leftBottomData.data1, type)
      } else if (this.tab.avg == '单车日均') {
        this.leftBottomEchart.clear()
        this.formatterLeftBottom2(this.leftBottomData.data2, type)
      }
    },
    // 单车日均echart
    formatterLeftBottom2(data, type) {
      let dateArr = _.map(data, item => {
        return moment(item.DBTIME).format('MM-DD')
      })
      let seriesData = []
      // 如果是载客时长 把秒切换成小时或分钟
      if (type == 'DUR_AVE') {
        seriesData = _.map(_.pluck(data, type), item => {
          return (item / 60).toFixed(2)
        })
      } else {
        seriesData = _.pluck(data, type)
      }

      this.leftBottomEchart = echarts.init(document.getElementById('lbEchart'))
      this.leftBottomEchart.setOption({
        tooltip: {
          trigger: 'axis'
        },

        grid: {
          left: '1%',
          right: '5%',
          bottom: '5%',
          top: '10%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          boundaryGap: false,
          data: dateArr
        },
        yAxis: {
          type: 'value',
          splitNumber: 2,
          axisLabel: {
            formatter: type == 'DUR_AVE' ? '{value} (分钟)' : '{value}'
          }
        },
        series: [
          {
            name: '',
            type: 'line',
            data: seriesData,
            markPoint: {
              data: [
                { type: 'max', name: '最大值', symbolOffset: [0, 19] },
                { type: 'min', name: '最小值' }
              ]
            },
            markLine: {
              data: [{ type: 'average', name: '平均值' }]
            }
          }
        ]
      })
    },
    // 行业日均echart
    formatterLeftBottom(data, type) {
      this.leftBottomEchart = echarts.init(document.getElementById('lbEchart'))
      this.leftBottomEchart.setOption({
        tooltip: {
          trigger: 'axis'
        },
        legend: {
          data: ['今日', '昨日', '7日平均', '30日平均'],
          bottom: '1%'
        },
        grid: {
          left: '1%',
          right: '1%',
          bottom: '18%',
          top: '8%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          boundaryGap: false,
          data: _.pluck(data.yesterday, 'TIME')
        },
        yAxis: {
          type: 'value'
        },
        series: [
          {
            name: '今日',
            type: 'line',
            data: _.pluck(data.today, type)
          },
          {
            name: '昨日',
            type: 'line',
            data: _.pluck(data.yesterday, type)
          },
          {
            name: '7日平均',
            type: 'line',
            data: _.pluck(data.sevenDays, type)
          },
          {
            name: '30日平均',
            type: 'line',
            data: _.pluck(data.thirtyDays, type)
          }
        ]
      })
    },
    // 左下 行业日均
    getIndustryDayAverage() {
      this.leftBottomData.loading = true
      ajaxT
        .get('map/getIndustryDayAverage', {
          baseURL: this.baseURL
        })
        .then(res => {
          this.leftBottomData.loading = false
          this.leftBottomData.data1 = res.data
          this.handleLeftBottomClick('ACTIVE_NUM')
        })
    },
    // 左下 单车日均
    getBicycleDayAverage() {
      this.leftBottomData.loading = true
      ajaxT
        .get('map/getBicycleDayAverage', {
          baseURL: this.baseURL
        })
        .then(res => {
          this.leftBottomData.loading = false
          this.leftBottomData.data2 = res.data
          this.handleLeftBottomClick('ORDER_AVE')
        })
    },
    // 右边中间echart
    formatterRightMiddleEchart(type) {
      let dateArr = _.map(this.rmData, item => {
        return moment(item.DB_TIME).format('MM-DD')
      })
      this.rmEchart = echarts.init(document.getElementById('rmEchart'))
      this.rmEchart.setOption({
        tooltip: {
          trigger: 'axis'
        },
        // legend: {
        //   data: ['最高气温', '最低气温']
        // },
        grid: {
          left: '10%',
          right: '10%',
          bottom: '18%',
          top: '20%'
        },
        calculable: true,
        xAxis: [
          {
            type: 'category',
            boundaryGap: false,
            data: dateArr
          }
        ],
        yAxis: [
          {
            type: 'value',
            axisLabel: {
              formatter: '{value}'
            }
          }
        ],
        series: [
          {
            type: 'line',
            data: _.pluck(this.rmData, type),
            markPoint: {
              data: [
                { type: 'max', name: '最大值' },
                { type: 'min', name: '最小值' }
              ]
            },
            markLine: {
              data: [{ type: 'average', name: '平均值' }]
            }
          }
        ]
      })
    },
    // 预警数字接口
    getEarlyWarningNum() {
      ajaxT.get('map/getEarlyWarningNum', { baseURL: this.baseURL }).then(res => {
        this.warning = res.data
      })
    },
    handleTableHeadClick(type) {
      this.rightTopData.activeName = type
      if (type == 'paidan') {
        this.formatterRightTopEchart('MATCH_NUM')
        this.formatterRightMiddleEchart('MATCH_NUM')
      } else if (type == 'wandan') {
        this.formatterRightTopEchart('DEP_NUM')
        this.formatterRightMiddleEchart('DEP_NUM')
      } else if (type == 'huoyuecheliang') {
        this.formatterRightTopEchart('ACTIVE_NUM')
        this.formatterRightMiddleEchart('ACTIVE_NUM')
      }
    },
    formatterRightBottomEchart(type) {
      if (this.rightEchart.right) this.rightEchart.right.clear()
      // this.rightTopData.data
      let sourceData = [['Company', 'DATA', 'INDEX']]
      let sortData = _.sortBy(
        _.filter(this.rightTopData.data, item => item.ABB_NAME),
        type
      )
      _.each(sortData, (item, index) => {
        sourceData.push([item.ABB_NAME, item[type], index + 1])
      })
      let legendData = []

      for (let i = sortData.length - 1; i > -1; i--) {
        legendData.push(sortData[i])
      }

      this.rightEchart.right = echarts.init(document.getElementById('rightRightEchart'))
      this.rightEchart.right.setOption({
        dataset: {
          source: sourceData
        },
        legend: {
          x: '50%', //水平位置，【left\center\right\数字】
          y: '45', //垂直位置，【top\center\bottom\数字】
          align: 'left', //字在图例的左边或右边【left/right】
          orient: 'vertical', //图例方向【horizontal/vertical】
          icon: 'circle', //图例形状【circle\rect\roundRect\triangle\diamond\pin\arrow\none】
          //图例文字
          textStyle: {
            fontFamily: '微软雅黑',
            color: '#000',
            fontSize: '15'
          },
          data: _.pluck(legendData, 'ABB_NAME'),
          formatter: function(params) {
            return params + '\t:' + _.filter(sortData, item => item.ABB_NAME == params)[0][type] + '\t\t\t\t'
          }
        },
        calculable: true,
        series: [
          {
            name: '半径模式',
            type: 'pie',
            clockWise: false,
            radius: [20, 200],
            center: ['20%', '62%'],
            roseType: 'area',
            encode: {
              itemName: 'Company',
              value: 'INDEX'
            },
            itemStyle: {
              normal: {
                color: function(params) {
                  var colorList = [
                    '#57868c',
                    '#48a698',
                    '#479c7f',
                    '#48af54',
                    '#53b440',
                    '#67b52d',
                    '#8cc13f',
                    '#bbd337',
                    '#d2b130',
                    '#da9c2d',
                    '#dc9e31',
                    '#e59524',
                    '#e58b3d',
                    '#e7741b',
                    '#d15122',
                    '#ce4018',
                    '#d93824',
                    '#c71b1b',
                    '#bc1540',
                    '#a71a4f',
                    '#a71a4f',
                    '#a71a4f'
                  ]
                  return colorList[params.dataIndex]
                },
                label: {
                  position: 'inside',
                  textStyle: {
                    fontWeight: 'bold',
                    fontFamily: 'Microsoft YaHei',
                    color: '#FAFAFA',
                    fontSize: 10
                  },
                  //formatter:'{b} \n{@Confirmed}例 \n死亡{@Dead}',//注意这里大小写敏感哦
                  formatter: function(params) {
                    if (params.data[2] > 7) {
                      return params.data[0]
                    } else {
                      return ''
                    }
                  }
                }
              }
            }
          },
          {
            name: '透明圆圈',
            type: 'pie',
            radius: [10, 27],
            center: ['20%', '62%'],
            itemStyle: {
              color: 'rgba(250, 250, 250, 0.3)'
            },
            data: [{ value: 10, name: '' }]
          },
          {
            name: '透明圆圈',
            type: 'pie',
            radius: [10, 35],
            center: ['20%', '62%'],
            itemStyle: {
              color: 'rgba(250, 250, 250, 0.3)'
            },
            data: [{ value: 10, name: '' }]
          }
        ]
      })
    },
    formatterRightTopEchart(type) {
      let all = 0,
        dd = 0,
        sy = 0,
        xd = 0,
        dc = 0,
        cc = 0,
        qt = 0,
        sz = 0,
        ws = 0,
        hh = 0,
        yg = 0
      let qtdata = ['{title|{b}}{abg|}', '  {valueHead|平台}{rateHead|数量(占比)}', '{hr|}']
      let sortData = _.sortBy(this.rightTopData.data, type)
      for (let i = sortData.length - 1; i >= 0; i--) {
        if (i < 8) {
          qt += sortData[i][type]
          qtdata.push('{value|' + sortData[i].ABB_NAME + '}{rate|' + sortData[i][type] + '}')
        }
        if (sortData[i].ABB_NAME == '') all = sortData[i][type]
        else if (sortData[i].ABB_NAME == '滴滴出行') dd = sortData[i][type]
      }
      let zhanbi = ((qt / (all - dd)) * 100).toFixed(2)
      let angle = 0
      if (zhanbi < 2 && zhanbi > 0) angle = -20
      else if (zhanbi > 2 && zhanbi < 10) angle = -10
      else if (zhanbi > 10 && zhanbi < 20) angle = 30
      else if (zhanbi > 20 && zhanbi < 300) angle = 75
      else if (zhanbi > 300) angle = 180
      this.rightTopData.all = all
      this.rightTopData.dd = dd
      this.formatterRightBottomEchart(type)
    },
    // 营运总览 跳转 日常监测预警
    handleYj(path) {
      this.$emit('jump-event', path)
    },
    echartClick() {},
    handleMouseOver(type) {
      for (let i = 0; i < this.dayList.length; i++) {
        if (this.dayList[i].AREA_NAME_PY.indexOf(type) > -1) {
          this.tck.hycl = this.dayList[i].ACTIVE_NUM
          this.tck.ddxq = this.dayList[i].MATCH_NUM
          this.tck.ddcj = this.dayList[i].DEP_NUM
          this.tck.areaName = this.dayList[i].AREA_NAME
        }
      }
      let el = document.getElementById(type)
      let rect = el.getBoundingClientRect()
      this.$refs['summary'].style.top = rect.top + 'px'
      this.$refs['summary'].style.left = rect.right + 125 + 'px'
      // this.$refs['summary'].style.opacity = 1
      this.$refs['summary'].style.display = 'block'
    },
    handleMouseOut(type) {
      // this.$refs['summary'].style.opacity = 0
      this.tck.hycl = ''
      this.tck.ddxq = ''
      this.tck.ddcj = ''
      this.tck.areaName = ''
      this.$refs['summary'].style.display = 'none'
      // setTimeout(() => {
      //   this.$refs['summary'].style.top = 0 + 'px'
      //   this.$refs['summary'].style.left = 0 + 100 + 'px'
      // }, 500)
      // let el = document.getElementById(type)
      // let rect = el.getBoundingClientRect()
    },
    handleTabAvg(type) {
      this.tab.avg = type
      if (type == '行业日均') {
        if (this.leftBottomData.data1.length == 0) this.getIndustryDayAverage()
        else this.handleLeftBottomClick('ACTIVE_NUM')
      } else if (type == '单车日均') {
        if (this.leftBottomData.data2.length == 0) this.getBicycleDayAverage()
        else this.handleLeftBottomClick('ORDER_AVE')
      }
    },
    handleTabDate(type) {
      this.tab.date = type
    },
    initRightEchart() {},
    initRightLeftEchart() {},
    querypermitNum() {
      ajaxT
        .get('map/permitNum', {
          baseURL: this.baseURL
        })
        .then(res => {
          this.permitNum.comp = res.data.comp
          this.permitNum.driver = res.data.driver
          this.permitNum.vehi = res.data.vehi
        })
    },
    getDayData() {
      ajaxT
        .get('map/getDayData', {
          baseURL: this.baseURL
        })
        .then(res => {
          for (let i = 0; i < res.data.top.length; i++) {
            if (i == 0) {
              this.dayData.jrpd = res.data.top[i].MATCH_NUM
              this.dayData.jrwd = res.data.top[i].DEP_NUM
              this.dayData.jrsc = res.data.top[i].ACCEPT_DUR
              this.dayData.jrhy = res.data.top[i].ACTIVE_NUM
            } else if (i == 1) {
              this.dayData.zrpd = res.data.top[i].MATCH_NUM
              this.dayData.zrwd = res.data.top[i].DEP_NUM
              this.dayData.zrsc = res.data.top[i].ACCEPT_DUR
              this.dayData.zrhy = res.data.top[i].ACTIVE_NUM
            } else if (i == 2) {
              this.dayData.szpd = res.data.top[i].MATCH_NUM
              this.dayData.szwd = res.data.top[i].DEP_NUM
              this.dayData.szsc = res.data.top[i].ACCEPT_DUR
              this.dayData.szhy = res.data.top[i].ACTIVE_NUM
            } else if (i == 3) {
              this.dayData.sypd = res.data.top[i].MATCH_NUM
              this.dayData.sywd = res.data.top[i].DEP_NUM
              this.dayData.sysc = res.data.top[i].ACCEPT_DUR
              this.dayData.syhy = res.data.top[i].ACTIVE_NUM
            }
          }
          this.rightTopData.data = res.data.bottom
          this.rmData = res.data.middle
          this.handleTableHeadClick('huoyuecheliang')
        })
    },
    getAreaSituation() {
      ajaxT
        .get('map/getAreaSituation', {
          baseURL: this.baseURL
        })
        .then(res => {
          this.current = res.data.current
          this.dayList = res.data.day
        })
    },
    getService() {
      ajaxT
        .get('map/getService', {
          baseURL: this.baseURL
        })
        .then(res => {
          if (res.data.length > 0) {
            this.dqzxzl = res.data[0].NUM
            let lv = ((res.data[0].ZKS / (res.data[0].ZKS + res.data[0].KSS)) * 100).toFixed(2) + '%'
            this.mapEchart.szlTotal = echarts.init(document.getElementById('szlTotal'))
            this.mapEchart.szlTotal.setOption({
              tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
              },
              color: ['#f59a19', '#d43b0b'],
              legend: {
                orient: 'vertical',
                right: '10',
                top: 'center',
                data: ['载客数', '空驶数'],
                formatter: function(name) {
                  var index = 0
                  var clientlabels = ['载客数', '空驶数']
                  var clientcounts = [res.data[0].ZKS, res.data[0].KSS]
                  clientlabels.forEach(function(value, i) {
                    if (value == name) {
                      index = i
                    }
                  })
                  return name + '  ' + clientcounts[index]
                }
              },
              graphic: [
                {
                  //环形图中间添加文字
                  type: 'text', //通过不同top值可以设置上下显示
                  left: '17%',
                  top: 'center',
                  style: {
                    text: `载客数\n${lv}`,
                    textAlign: 'center',
                    fill: '#064ba6', //文字的颜色
                    lineWidth: '2px',
                    fontSize: 15,
                    fontFamily: 'Microsoft YaHei'
                  }
                }
              ],

              series: [
                {
                  name: '数量',
                  type: 'pie',
                  radius: ['50%', '70%'],
                  center: ['25%', '50%'],
                  avoidLabelOverlap: false,
                  label: {
                    show: false,
                    position: 'center'
                  },

                  labelLine: {
                    show: false
                  },
                  data: [
                    { value: res.data[0].ZKS, name: '载客数' },
                    { value: res.data[0].KSS, name: '空驶数' }
                  ]
                }
              ]
            })
          }
        })
    }
  }
}
</script>

<style lang="scss" scoped>
$height: 550px;
$width: 1150px;
$background_color_2000: #6dcff6;
$background_color_5000: #129399;
$background_color_10000: #fe733c;
$background_color_40000: #fc454a;

.tw-layout {
  &-content {
    // height: $height;
    height: 65%;
    display: flex;
  }
  &-foot {
    // height: calc(100% - #{$height});
    height: 35%;
  }
}
.tw-right {
  // width: calc(100% - #{$width});
  width: 40%;
  height: 100%;
}
.tw-left {
  // width: $width;
  width: 100%;
  background-color: #eff3fe;
}
.tw-my-tab {
  $normal_title_color: #7dc7f8;
  $hover_title_color: #62baf9;
  $title_height: 40px;

  height: $title_height;
  display: flex;
  .tw-tab-title {
    position: relative;
    flex: 1;
    text-align: center;
    line-height: $title_height;
    cursor: pointer;
    font-size: 17px;
    color: #ffffff;
    background-color: $normal_title_color;
    transition: background-color 0.3s ease-in-out;
    .tw-title {
      position: relative;
      z-index: 2;
    }
    &.active {
      background: $hover_title_color;
    }
    &.no-active {
      &:after,
      &:before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        width: 0;
        height: 100%;
        background: $normal_title_color;
        z-index: -2;
      }
      &:hover {
        background: $hover_title_color;
      }
      &:before {
        width: 0;
        transition: width 0.3s ease-in-out;
        background: $hover_title_color;
        z-index: 1;
      }

      &:hover:after,
      &:hover:before {
        width: 100%;
      }
    }
  }
}
.tw-right {
  background-color: #eff3fe;
  .tw-sum {
    $margin: 5px;
    $item_background_color: #c6e6fb;
    $height: 40px;

    display: flex;
    flex-wrap: wrap;
    &-item {
      height: $height;
      line-height: $height;
      width: calc(50% - #{$margin} * 2);
      margin: $margin;

      &:first-child {
        margin: {
          top: $margin * 2;
        }
      }
      &:nth-child(2) {
        margin: {
          top: $margin * 2;
        }
      }
      &:nth-child(3),
      &:nth-child(4) {
        margin: {
          bottom: $margin * 2;
        }
      }
      font-size: 16px;
      text-align: center;
      background-color: $item_background_color;
    }
  }
  .tw-echart {
    height: calc(100% - 210px);
    width: 100%;
  }
  .tw-table {
    width: 100%;
    padding: 10px;
    thead {
      background-color: #7dc7f8;
      color: #ffffff;
      .tw-item {
        cursor: pointer;
        &.active {
          background-color: #62baf9;
        }
      }
    }
    td {
      padding: 7px 10px;
      font-size: 15px;
      text-align: center;
    }
    tr {
      border-bottom: 1px solid #eeeeee;
    }
  }
  .tw-echart-area {
    height: calc(100% - 159px - 300px);
    .tw-echart-left {
      float: left;
      width: 30%;
      height: 100%;
      .tw-title {
        line-height: 25px;
        padding-left: 50px;
        font-size: 17px;
        color: #356bd4;
        font-weight: 600;
        &:first-child {
          padding-top: 15px;
        }
      }
      .tw-echart {
        width: 100%;
        height: calc(100% - 65px);
      }
    }
    .tw-echart-right {
      height: 100%;
      .tw-echart {
        width: 100%;
        height: 100%;
      }
    }
  }
}
.tw-color-type {
  display: flex;
  margin: 0 5px;
  height: 20px;
  .tw-color-item {
    flex: 1;
    &:nth-child(1) {
      background-color: $background_color_2000;
    }
    &:nth-child(2) {
      background-color: $background_color_5000;
    }
    &:nth-child(3) {
      background-color: $background_color_10000;
    }
    &:nth-child(4) {
      background-color: $background_color_40000;
    }
  }
}
.tw-tips {
  &-group {
    display: flex;
    height: 40px;
  }
  &-item {
    line-height: 40px;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    span {
      font-size: 14px;
    }
    .tw-color {
      height: 15px;
      width: 15px;
      margin-right: 5px;
    }
    &:nth-child(1) {
      .tw-color {
        background-color: $background_color_2000;
      }
    }
    &:nth-child(2) {
      .tw-color {
        background-color: $background_color_5000;
      }
    }
    &:nth-child(3) {
      .tw-color {
        background-color: $background_color_10000;
      }
    }
    &:nth-child(4) {
      .tw-color {
        background-color: $background_color_40000;
      }
    }
  }
}

.tw-layout-foot {
  background-color: #eff3fe;
  .tw-tab {
    height: 40px;
    background-color: #e5e5e5;
    width: 100%;
    float: none;
    &-item {
      float: left;
      line-height: 40px;
      font-size: 18px;
      padding: 0 20px;
      color: #000000;
      position: relative;
      cursor: pointer;
      transition: background-color 0.3s ease-in-out;
      &::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: 0;
        z-index: 0;
      }
      &::after {
        width: 0;
        height: 2px;
        background-color: #1e2796;
        transition: width 0.3s ease-in-out;
      }

      &:hover,
      &.active {
        background-color: #eeeeee;
        color: #1e2796;
        &::after {
          width: 100%;
        }
      }

      &.active {
        font-weight: 600;
      }
    }
  }
  .tw-echart-area {
    height: calc(100% - 40px);
    .tw-item {
      margin: 10px 8px;
      width: calc(100% - 16px);
      height: calc(100% - 20px);
      background-color: #eff3fe;
      border: 1px solid #d6ebfa;
      border-radius: 10px;
      box-shadow: 0px 0px 10px 0 #cfe9f9;
      .tw-title {
        position: relative;
        padding-left: 15px;
        height: 25px;
        line-height: 25px;
        color: #1e2796;
        font-weight: 600;
        font-size: 15px;
        border-top-left-radius: 10px;
        border-left: 2px solid #1e2796;
        &::after {
          content: '';
          position: absolute;
          top: 0px;
          left: 5px;
          right: 0;
          height: 2px;
          background: linear-gradient(135deg, #1e2796, #ffffff);
        }
        &::before {
          content: '';
          position: absolute;
          bottom: 0px;
          left: 0px;
          right: 0;
          height: 2px;
          background: linear-gradient(135deg, #1e2796, #ffffff);
        }
      }
      .tw-echart {
        height: calc(100% - 25px);
        width: 100%;
      }
    }
  }
}
.tw-left {
  $height: 50px;
  $color: #356bd4;
  height: 65%;
  position: relative;
  .tw-sum {
    height: $height;
    width: 100%;
    .tw-title {
      width: 40%;
      float: left;
      margin: 10px 0;
      padding: 0 20px;
      box-sizing: border-box;
      border-right: 1px solid $color;
      line-height: $height - 20px;
      font-size: 17px;
      text-align: center;
      color: $color;
      font-weight: 600;
      &.sub {
        width: 60%;
        height: 100%;
        border: none;
        font-weight: normal;
        color: #000000;
        margin: 0;
        line-height: $height;
      }
      span {
        line-height: 50px;
        text-align: center;
        vertical-align: middle;
        font-size: 15px;
        &:nth-child(2) {
          font-size: 30px;
          vertical-align: -6%;
          color: #e95522;
        }
      }
    }
    .tw-item {
      float: left;
      width: calc((100% - 50px - 30px - 10px) / 3);
      height: 100%;
      border: 1px solid $color;
      box-sizing: border-box;
      margin-right: 10px;
      box-sizing: border-box;
      &:first-child {
        margin-left: 5px;
      }
      &:last-child {
        margin-right: 5px;
      }
      &.small {
        width: 50px;
      }
    }
  }
  .tw-echart-area {
    position: absolute;
    bottom: 25px;
    right: 0;
    width: 300px;
    .tw-title {
      width: 100%;
      height: 30px;
      line-height: 30px;
      color: #064ba6;
      font-weight: 600;
      font-size: 23px;
      background-color: #c8e5f5;
      padding-left: 5px;
      box-sizing: border-box;
    }
    .tw-echart {
      width: 100%;
      height: 200px;
      z-index: 20;
    }
  }
  .tw-summary {
    position: absolute;
    opacity: 1;
    display: none;
    transition: opacity 0.3s ease-in-out;
    transform: translate(-50%, -100%);
    z-index: 1;
    .tw-item {
      width: 200px;
      background-color: #02a8f6;
      border-radius: 20px;
      color: #ffffff;
      font-size: 14px;
      padding: 5px 10px;
      margin-bottom: 10px;
      div {
        padding: 8px;
      }
    }
  }
}
.tw-rank {
  position: absolute;
  top: 60px;
  left: 20px;

  .tw-title {
    font-weight: 600;
    font-size: 15px;
    color: #1548a4;
  }
  .tw-list {
    margin-top: 10px;
    li {
      position: relative;
      margin-bottom: 5px;
      span {
        padding-left: 20px;
        font-size: 16px;
        color: #1548a4;
        font-weight: 600;
        line-height: 20px;
        width: 70px;
        display: inline-block;
        &:first-child {
          padding-left: 30px;
        }
      }
      &::before {
        content: '';
        width: 15px;
        height: 15px;
        background-color: #b2c7f5;
        position: absolute;
        top: 1.5px;
      }
      /*&:first-child::before {*/
      /*background-color: #e40012;*/
      /*}*/
      &:nth-child(2)::before {
        background-color: #e40012;
      }
      &:nth-child(3)::before {
        background-color: #ea5a1b;
      }
      &:nth-child(4)::before {
        background-color: #f5ac1f;
      }
      &:nth-child(14)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(5)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(6)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(7)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(8)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(9)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(10)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(11)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(12)::before {
        background-color: #f7d2b7;
      }
      &:nth-child(13)::before {
        background-color: #f7d2b7;
      }
    }
  }
}
.tw-svg-area {
  position: relative;
  top: 0px;
  left: 320px;
  width: 500px;
  height: 450px;
}
.cfq-svg {
  transform: scale(0.8);
}
path:hover {
  fill: #3e72d7;
}
#shangchengqu:hover {
  fill: #3e72d7;
}
path {
  z-index: 2;
}
.tw-yj {
  position: absolute;
  bottom: 10px;
  .tw-item {
    display: inline-block;
    margin-left: 20px;
    z-index: 10;
    cursor: pointer;
    span {
      padding-left: 5px;
      font-size: 17px;
    }
  }
  .icon-yujing {
    font-size: 30px;
    color: red;
  }
}
.tw-template-wrapper {
  overflow: hidden;
  display: flex;
}
.tw-lay-left {
  height: 100%;
  width: 60%;
}
#left_bottom-btn {
  padding: 10px 0 0 90px;
  .tw-btn {
    display: inline-block;
    line-height: 1;
    white-space: nowrap;
    cursor: pointer;
    background-color: #eff3fe;
    border: 1px solid #dcdfe6;
    color: #606266;
    text-align: center;
    box-sizing: border-box;
    outline: 0;
    margin: 0;
    transition: 0.1s;
    font-weight: 500;
    padding: 9px 15px;
    font-size: 12px;
    border-radius: 3px;
    margin-left: 10px;
    &:hover,
    &.active {
      color: #409eff;
      border-color: #c6e2ff;
      background-color: #ecf5ff;
    }
  }
}
#left_bottom-echart {
  height: calc(100% - 42px);
  box-sizing: border-box;
  padding: 5px;
  #lbEchart {
    height: 100%;
  }
}
#right_mid-echart {
  height: 300px;
  box-sizing: border-box;
  padding: 5px;
  #rmEchart {
    height: 100%;
  }
}
</style>
